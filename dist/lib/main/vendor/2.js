(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{178:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(69)),a=i(r(96));r(199),r(100);var o=r(1),l=i(o),u=i(r(207));function i(e){return e&&e.__esModule?e:{default:e}}var c=a.default.SubMenu,f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.componentDidMount=function(){r.loadMenuDatas(),r.loadShellStyleDatas()},r.loadMenuDatas=function(){fetch("../../../mock/menuDatas.json").then(function(e){return e.json()}).then(function(e){var t=e.data,n=r.handleMenuGroup(t);r.setState({menuDatas:n,openKeys:0!=n.length?[n[0].group]:[]})})},r.loadShellStyleDatas=function(){fetch("../../../mock/shellStyleDatas.json").then(function(e){return e.json()}).then(function(e){0!=e.data.length&&r.setState({shellStyleDatas:e.data,currentShellStyle:e.data[0].style})})},r.handleMenuGroup=function(e){var t=[],r=[],n=[],a=!0,o=!1,l=void 0;try{for(var u,i=e[Symbol.iterator]();!(a=(u=i.next()).done);a=!0){var c=u.value,f=c.group,s=c.groupName;n.push(JSON.stringify({group:f,groupName:s}))}}catch(e){o=!0,l=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw l}}n=Array.from(new Set(n));var p=!0,d=!1,h=void 0;try{for(var y,_=n[Symbol.iterator]();!(p=(y=_.next()).done);p=!0){var m=y.value;r.push(JSON.parse(m))}}catch(e){d=!0,h=e}finally{try{!p&&_.return&&_.return()}finally{if(d)throw h}}var b=!0,v=!1,g=void 0;try{for(var w,E=r[Symbol.iterator]();!(b=(w=E.next()).done);b=!0){var S=w.value,O=(f=S.group,{groupName:s=S.groupName,group:f,children:[]}),j=!0,D=!1,C=void 0;try{for(var k,M=e[Symbol.iterator]();!(j=(k=M.next()).done);j=!0){var P=k.value;P.group==f&&O.children.push(P)}}catch(e){D=!0,C=e}finally{try{!j&&M.return&&M.return()}finally{if(D)throw C}}t.push(O)}}catch(e){v=!0,g=e}finally{try{!b&&E.return&&E.return()}finally{if(v)throw g}}return t},r.handleOnOpenChange=function(e){return r.setState({openKeys:e})},r.handleShellStyle=function(e){return r.setState({currentShellStyle:e})},r.render=function(){var e=r.state,t=e.menuDatas,o=e.openKeys,i=e.shellStyleDatas,f=e.currentShellStyle,s={openKeys:o,mode:"inline",onOpenChange:r.handleOnOpenChange},p=l.default.createElement("span",null,l.default.createElement(n.default,{type:"retweet",theme:"outlined"}),l.default.createElement("span",null,"样式选择"));return l.default.createElement("div",{className:"DraggableMenu"},l.default.createElement(a.default,null,l.default.createElement(c,{title:p},i.map(function(e,t){var n=e.thumbnailColor,o=e.text,u=e.style;return l.default.createElement(a.default.Item,{key:"shellStyle"+t,onClick:function(){return r.handleShellStyle(u)}},l.default.createElement("div",{style:{width:10,height:10,marginRight:10,background:n,display:"inline-block"}}),l.default.createElement("span",{style:{userSelect:"none"}},o))}))),l.default.createElement(a.default,s,t.map(function(e){var t=e.groupName,r=e.children,a=e.group,o=l.default.createElement("span",null,l.default.createElement(n.default,{type:"laptop",theme:"outlined"}),l.default.createElement("span",null,t));return l.default.createElement(c,{key:a,title:o},r.map(function(e){return l.default.createElement(u.default,{key:"dragMenuItem"+e.key,item:Object.assign({},e,{style:f})})}))})))},r.state={menuDatas:[],openKeys:[],shellStyleDatas:[],currentShellStyle:{}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),t}();t.default=f},20:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(105));r(164);var a=r(1),o=i(a),l=i(r(71)),u=i(r(178));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=n.default.Sider,s=function(e){function t(){var e,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),p=0;p<i;p++)s[p]=arguments[p];return r=a=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.render=function(){return o.default.createElement("div",{className:"Wrapper"},o.default.createElement(n.default,{style:{minHeight:"100vh"}},o.default.createElement(f,{theme:"light",width:"256"},o.default.createElement(u.default,null)),o.default.createElement(n.default,null,o.default.createElement(l.default,{isEdit:!0}))))},c(a,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),t}();t.default=s},207:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(96));r(100);var a=r(1),o=l(a);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=function(e){function t(){var e,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,i=Array(l),c=0;c<l;c++)i[c]=arguments[c];return r=a=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.handleDragStart=function(e,t){e.dataTransfer.setData("menuItemToGrid",JSON.stringify(t))},a.render=function(){var e=a.props.item,t=e.draggable,r=void 0===t||t,l=e.text,u=e.key,i=(e.url,{key:"menuItem"+u,draggable:r,onDragStart:function(t){return a.handleDragStart(t,e)}});return o.default.createElement(n.default.Item,Object.assign({},a.props,i),l)},u(a,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),t}();t.default=i},71:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactGridLayout=__webpack_require__(89),_reactGridLayout2=_interopRequireDefault(_reactGridLayout);__webpack_require__(94),__webpack_require__(95);var _Shell=__webpack_require__(74),_Shell2=_interopRequireDefault(_Shell);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Grid=function(_Component){function Grid(props){_classCallCheck(this,Grid);var _this=_possibleConstructorReturn(this,(Grid.__proto__||Object.getPrototypeOf(Grid)).call(this,props));return _this.componentDidMount=function(){_this.loadLayout(function(){var layout=_this.state.layout,pathArr=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=layout[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var item=_step.value,path=item.path,type=item.type;"iframe"!=type&&pathArr.push("import('"+path+"')")}}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}pathArr="["+pathArr.toString()+"]",Promise.all(eval(""+pathArr)).then(function(e){for(var t=0;t<e.length;t++){var r=e[t].TestModule,n=layout[t].i,a=new r(_this[n]),o=a._moduleOnMount;o&&o.call(a)}})})},_this.loadLayout=function(e){fetch("../../../mock/layoutDatas.json").then(function(e){return e.json()}).then(function(t){var r=t.layout;_this.setState({layout:r},function(){return e&&e()})})},_this.handleLayoutChange=function(e){},_this.handleDragDrop=function(e){var t=_this.state.layout,r=JSON.parse(e.dataTransfer.getData("menuItemToGrid")),n=r.key,a=r.url,o=r.text,l=r.style;t.push({i:""+n+t.length,x:2*t.length%12,y:1/0,w:2,h:9,type:"iframe",imgUrl:a,title:o,style:l}),_this.setState({layout:t})},_this.render=function(){var e=_this.state.layout,t=_this.props.isEdit,r=void 0===t||t,n={className:"layout",cols:12,rowHeight:30,width:(document.documentElement.clientWidth||document.body.clientWidth)-256,margin:[10,10],onLayoutChange:_this.handleLayoutChange,isDraggable:r,isResizable:r};return _react2.default.createElement("div",{className:"Grid",onDrop:_this.handleDragDrop,onDragOver:function(e){return e.preventDefault()}},_react2.default.createElement(_reactGridLayout2.default,n,e.map(function(e){var t=e.i,n=e.type,a=e.imgUrl,o=e.title,l=e.path,u=e.style,i=void 0===u?{}:u,c="calc(100% - 30px)",f={key:t,"data-grid":e,style:Object.assign({},{zIndex:1,userSelect:"none"},i),title:o},s=r?_react2.default.createElement(_Shell2.default,f,_react2.default.createElement("img",{src:a,style:{width:"100%",height:c}})):_react2.default.createElement(_Shell2.default,f,_react2.default.createElement("iframe",{src:l,style:{border:"none",width:"100%",height:c,overflow:"auto"}}));return"iframe"==n?s:_react2.default.createElement(_Shell2.default,f,_react2.default.createElement("div",{style:{height:c},ref:function(e){return _this[t]=e}}))})))},_this.state={layout:[]},_this}return _inherits(Grid,_Component),Grid}(_react.Component);exports.default=Grid},74:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),a=function(e){return e&&e.__esModule?e:{default:e}}(n);var o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.componentDidMount=function(){},r.render=function(){var e=r.props,t=e.children,n=e.title;e.style;return a.default.createElement("div",r.props,a.default.createElement("div",{style:{background:"#ccc",height:30}},n),t)},r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.Component),t}();t.default=o}}]);