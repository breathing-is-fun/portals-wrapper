(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(528));n(529);var a=n(2),o=c(a),l=c(n(548)),i=c(n(777)),u=n(532),s=n(516);function c(e){return e&&e.__esModule?e:{default:e}}var f=r.default.Sider,d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentDidMount=function(){n.loadMenuDatas()},n.handleMenuClick=function(e,t,r){n.loadLayoutDatas("all"==e?1:r),n.setState({selectedKeys:t,isAll:"all"==e})},n.handleOnOpenChange=function(e){return n.setState({openKeys:e})},n.loadLayoutDatas=function(e){(0,s.ajax)({key:"s_slmh_meal_switch",data:{id:e},success:function(e){var t=e.data;return n.setState({layout:t})}})},n.loadMenuDatas=function(){(0,s.ajax)({key:"s_slmh_menu_data",data:{type:1},success:function(e){var t=e.data,r=(0,u.handleMenuGroup)(t),a=0!=t.length?t[0]:{},o=a.group,l=a.id;n.setState({menuDatas:r,openKeys:[o],selectedKeys:[o+l]},function(){return n.loadLayoutDatas(1)})}})},n.handleMealOnDelete=function(e,t){(0,s.ajax)({key:"d_slmh_meal",data:{id:t},success:function(e){e.data;n.loadLayoutDatas(1)}})},n.render=function(){var e=n.state,t=e.layout,a=e.menuDatas,u=e.openKeys,s=e.selectedKeys,c=e.isAll,d={selectedKeys:s,menuDatas:a,openKeys:u,type:"module",onClick:n.handleMenuClick,onOpenChange:n.handleOnOpenChange};return o.default.createElement(r.default,{style:{minHeight:"100vh"}},o.default.createElement(f,{theme:"light",width:"256"},o.default.createElement(l.default,d)),o.default.createElement(r.default,null,o.default.createElement(i.default,{layout:t,onDelete:n.handleMealOnDelete,isAll:c})))},n.state={layout:[],menuDatas:[],openKeys:[],selectedKeys:[],isAll:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),t}();t.default=d},516:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=void 0;var r=n(519),a=n(517),o=["json","html","text"],l=function(e){if(o.includes(e))return e;console.error("fetch type error.")},i=function(e,t){if(e){return(e.includes("?")?"&":"?")+u(t)}},u=function(e){var t="";for(var n in e)t+=n+"="+e[n]+"&";return t=t.substr(0,t.length-1)},s=function(e){var t=void 0;for(var n in a.path)if(e==n){t=a.path[n];break}if(t)return t};t.ajax=function(e){var t,n,a=e.url,o=e.key,u=e.method,c=void 0===u?"GET":u,f=e.data,d=e.type,p=void 0===d?"json":d,h=e.success;l(p),t=s(o),n=i(t,f);var y={};"GET"!=c&&(y={body:JSON.stringify(f),method:c,headers:{"Content-Type":"application/json"}}),(0,r.fetch)(a||t+n,y).then(function(e){return e[p]()}).then(function(e){return h&&h(e)}).catch(function(e){return console.error(e)})}},517:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.path={propertyDatas:"../../../mock/propertyDatas.json",s_slmh_menu_data:"http://47.95.1.229:9003/webapi/api/v1.1/basic/data?key=s_slmh_menu_data",s_slmh_meal_layout_data:"http://47.95.1.229:9003/webapi/api/v1.1/basic/data?key=s_slmh_meal_layout_data",s_slmh_meal_switch:"http://47.95.1.229:9003/webapi/api/v1.1/basic/data?key=s_slmh_meal_switch",d_slmh_meal:"http://47.95.1.229:9003/webapi/api/v1.1/basic/data?key=d_slmh_meal",add_meal:"http://47.95.1.229:9007/webapi1/api/basic/meal"}},524:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(77)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(515);var o=n(2),l=i(o);function i(e){return e&&e.__esModule?e:{default:e}}n(525);var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));s.call(n);var r=e.title;return n.state={title:r,propertyBoardVisible:!1,propertyBoardDataSource:{}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),t}(),s=function(){var e=this;this.componentDidMount=function(){},this.handleOnDelete=function(t){var n=e.props.onDelete,r=e.props["data-grid"]||{};e.preventBubble(t),n&&n(r)},this.handleOnEdit=function(t){var n=e.props,r=n.style,a=n.onEdit,o=e.props["data-grid"]||{};e.preventBubble(t),e.setState({propertyBoardVisible:!0,propertyBoardDataSource:{title:o.title||"",style:r}},function(){a&&a(!0)})},this.preventBubble=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},this.handleDrawerOnClose=function(t){var n=e.props.onEdit;e.setState({propertyBoardVisible:t},function(){n&&n(t)})},this.render=function(){var t=e.props,n=t.children,o=t.isEdit,i=t.isDelete,u=t.type,s=void 0===u?"component":u,c=t.onClick,f=t.showTitle,d=void 0===f||f,p=e.state.title,h=l.default.createElement(r.default,{type:"edit",theme:"outlined",className:"operation",onMouseDown:e.handleOnEdit,style:{right:22}}),y=l.default.createElement(r.default,{type:"delete",theme:"outlined",className:"operation",onMouseDown:e.handleOnDelete.bind(e),style:{right:0}}),m=Object.assign({},e.props);return delete m.getDrawerStatus,delete m.isDelete,delete m.onDelete,delete m.onEdit,delete m.isEdit,delete m.title,delete m.showTitle,l.default.createElement("div",a({},m,{className:"Shell"+("component"!=s?" border-transition":""),onClick:function(e){return"add"==s&&c&&c(e)}}),i&&y,o&&h,"add"!=s&&d&&l.default.createElement("span",{className:"operation-title"},p),n)}};t.default=u},525:function(e,t,n){var r=n(526);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(100)(r,a);r.locals&&(e.exports=r.locals)},526:function(e,t,n){(e.exports=n(99)(!1)).push([e.i,".Shell .operation {\r\n    cursor: pointer;\r\n    padding: 5px;\r\n    float: right;\r\n    position: absolute;\r\n    top: 0px;\r\n}\r\n\r\n.Shell .operation-title {\r\n    font-family: MicrosoftYaHei;\r\n    font-size: 14px;\r\n    font-weight: normal;\r\n    font-stretch: normal;\r\n    letter-spacing: 1px;\r\n    color: #171717;\r\n    padding-left: 10px;\r\n}\r\n\r\n.Shell {\r\n    transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\r\n}\r\n\r\n.Shell:hover {\r\n    transform: scale(1.05);\r\n}\r\n\r\n.border-transition:hover {\r\n    border: 1px dashed #1890ff;\r\n}\r\n\r\n.border-transition {\r\n    border: 1px dashed #d9d9d9;\r\n}",""])},532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){var t=[],n=[],r=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var u=l.value,s=u.group,c=u.groupname;n.push(JSON.stringify({group:s,groupName:c}))}}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}n=Array.from(new Set(n));var f=!0,d=!1,p=void 0;try{for(var h,y=n[Symbol.iterator]();!(f=(h=y.next()).done);f=!0){var m=h.value;t.push(JSON.parse(m))}}catch(e){d=!0,p=e}finally{try{!f&&y.return&&y.return()}finally{if(d)throw p}}return t};t.handleMenuGroup=function(e){var t=[],n=r(e),a=!0,o=!1,l=void 0;try{for(var i,u=n[Symbol.iterator]();!(a=(i=u.next()).done);a=!0){var s=i.value,c=s.group,f={groupName:s.groupName,group:c,children:[],key:""},d=!0,p=!1,h=void 0;try{for(var y,m=e[Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var b=y.value,v=b.group,_=b.id,g=b.text,w=b.key,O=f.children;v==c&&(f.key=v+_,f.id=_,O.push(Object.assign({},b,{title:g,value:_,key:w})))}}catch(e){p=!0,h=e}finally{try{!d&&m.return&&m.return()}finally{if(p)throw h}}t.push(f)}}catch(e){o=!0,l=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw l}}return t}},548:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(77)),a=s(n(520));n(515),n(521);var o=n(2),l=s(o),i=s(n(0)),u=s(n(550));function s(e){return e&&e.__esModule?e:{default:e}}var c=a.default.SubMenu,f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentDidMount=function(){},n.handleMenuClick=function(e){var t=e.item,r=(e.key,e.keyPath),a=n.props.onClick,o=t.props.item,l=void 0===o?{}:o;a&&a(l?l.group:null,[r[r.length-1]+l.id],l.id)},n.handleShellStyle=function(e){return n.setState({currentShellStyle:e})},n.render=function(){var e=n.props,t=e.type,o=void 0===t?"component":t,i=(e.shellStyleDatas,e.menuDatas),s=void 0===i?[]:i,f=e.openKeys,d=e.selectedKeys,p=e.onOpenChange,h=e.onSave,y=n.state.currentShellStyle,m={openKeys:f,selectedKeys:[n.menuSelectPrefix+d[0]],mode:"inline",onOpenChange:p,onClick:n.handleMenuClick},b=l.default.createElement(a.default.Item,{key:"back",onClick:function(){return location.hash="/display"}},l.default.createElement(r.default,{type:"arrow-left",theme:"outlined"}),l.default.createElement("span",null,"首页")),v=l.default.createElement(a.default.Item,{key:"back",onClick:function(){return h&&h()}},l.default.createElement(r.default,{type:"arrow-left",theme:"outlined"}),l.default.createElement("span",null,"保存并返回"));return l.default.createElement("div",{className:"DraggableMenu"},l.default.createElement(a.default,m,"module"==o&&b,"component"==o&&v,s.map(function(e){var t=e.groupName,a=e.children,o=void 0===a?[]:a,i=e.group,s=l.default.createElement("span",null,l.default.createElement(r.default,{type:"laptop",theme:"outlined"}),l.default.createElement("span",null,t));return l.default.createElement(c,{key:i,title:s},o.map(function(e,t){var r=e.group,a=e.id;return l.default.createElement(u.default,{key:""+n.menuSelectPrefix+r+a,item:Object.assign({},e,{style:y})})}))})))},n.state={currentShellStyle:{}},n.menuSelectPrefix="dragMenuItem",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),t}();t.default=f,f.propTypes={selectedKeys:i.default.array,menuDatas:i.default.array,openKeys:i.default.array,onClick:i.default.func,onOpenChange:i.default.func,shellStyleDatas:i.default.array,onSave:i.default.func,type:i.default.string}},550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(520));n(521);var a=n(2),o=l(a);function l(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,u=Array(l),s=0;s<l;s++)u[s]=arguments[s];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.handleDragStart=function(e,t){e.dataTransfer.setData("menuItemToGrid",JSON.stringify(t))},a.render=function(){var e=a.props.item,t=e.draggable,n=void 0===t||t,l=e.text,i=e.id,u={key:e.group+i,draggable:n,onDragStart:function(t){return a.handleDragStart(t,e)}};return o.default.createElement(r.default.Item,Object.assign({},a.props,u),l)},i(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),t}();t.default=u},777:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(213));n(217);var a=n(2),o=s(a),l=n(586),i=s(n(524)),u=s(n(778));function s(e){return e&&e.__esModule?e:{default:e}}n(872);var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleShellOnDelete=function(e){var t=e.id,r=n.props,a=r.layout,o=r.onDelete;o&&o((0,l.reject)(a,{id:t}),t)},n.handleShellonEdit=function(e,t){n.setState({modalVisible:e,currentModalItem:t})},n.render=function(){var e=n.props,t=e.layout,a=e.isAll,l=n.state,s=l.modalVisible,c=l.currentModalItem,f={zIndex:1,userSelect:"none",width:"20%",height:200,background:"#e0e6ee",borderRadius:2,transition:"all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",float:"left",margin:30,position:"relative"},d={title:"套餐基础设置",visible:s,onCancel:function(){return n.setState({modalVisible:!s})},destroyOnClose:!0,footer:null,width:700};return o.default.createElement("div",{className:"ModuleLayout"},t.map(function(e){var t=e.id,r=e.group,l=e.title,u=(e.isedit,e.imgurl),s=(e.isdelete,e.showtitle),c={key:r+t,title:l,showTitle:s,isEdit:a,isDelete:!0,type:"module","data-grid":e,style:f,onDelete:n.handleShellOnDelete,onEdit:function(t){return n.handleShellonEdit(t,e)}};return o.default.createElement(i.default,c,o.default.createElement("img",{src:u,style:{width:"100%",height:s?"calc(100% - 21px)":"100%"}}))}),o.default.createElement(i.default,{key:"add",style:Object.assign({},f,{display:"flex",alignItems:"center",justifyContent:"center"}),type:"add",onClick:function(){return n.handleShellonEdit(!0,{})}},o.default.createElement("i",{className:"plus-icon"},"+")),o.default.createElement(r.default,d,o.default.createElement(u.default,{currentModalItem:c})))},n.state={modalVisible:!1,currentModalItem:{}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),t}();t.default=c},778:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(779)),a=h(n(787)),o=h(n(151)),l=h(n(788)),i=h(n(594)),u=h(n(795)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(854),n(856),n(212),n(857),n(562),n(868);var c=n(2),f=h(c),d=n(516),p=n(532);function h(e){return e&&e.__esModule?e:{default:e}}var y=u.default.Item,m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentDidMount=function(){n.setDefaultValueOfInput(),n.loadDepartDatas()},n.loadDepartDatas=function(){(0,d.ajax)({key:"s_slmh_menu_data",data:{type:1},success:function(e){var t=e.data,r=(0,p.handleMenuGroup)(t),a=[],o=!0,l=!1,i=void 0;try{for(var u,s=r[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var c=u.value,f=c.group,d=c.groupName,h=(c.key,c.children),y=c.id;"all"!=f&&a.push({title:d,value:y,children:h})}}catch(e){l=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(l)throw i}}n.setState({departmentDatas:a})}})},n.setDefaultValueOfInput=function(){var e=n.props,t=e.form,r=e.currentModalItem,a=r.title,o=r.imgurl;(0,t.setFields)({title:{value:a,error:null},imgurl:{value:o,error:null}})},n.handleSubmit=function(e){var t=n.props,r=t.form,a=t.currentModalItem.id,o=void 0===a?-1:a;e.preventDefault(),r.validateFields(function(e,t){e||(location.hash="/edit/component",window._acrossDatas=Object.assign({},window._acrossDatas,{moduleToComponent:{data:Object.assign({},t,{id:o})},status:"pending"}))})},n.hasErrors=function(e){return Object.keys(e).some(function(t){return e[t]})},n.render=function(){var e=n.state.departmentDatas,t=n.props.form,c=t.getFieldDecorator,d=t.getFieldsError,p=t.resetFields,h={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},m={dropdownStyle:{overflow:"auto"},allowClear:!0,multiple:!0,treeCheckable:!0,treeDefaultExpandAll:!0,treeData:e};return f.default.createElement("div",{className:"PropertyForm"},f.default.createElement(u.default,null,f.default.createElement(y,s({},h,{label:"标题"}),c("title",{rules:[{required:!0,message:"请输入标题"}]})(f.default.createElement(i.default,null))),f.default.createElement(y,s({},h,{label:"缩略图地址"}),c("imgurl",{rules:[{required:!0,message:"请输入像url的地址，比如http://www.github.com",type:"url"}]})(f.default.createElement(i.default,null))),f.default.createElement(y,s({},h,{label:"人员权限"}),c("department",{rules:[{required:!0,message:"请勾上至少一个"}]})(f.default.createElement(l.default,m))),f.default.createElement(y,null,f.default.createElement(r.default,null,f.default.createElement(a.default,{span:22,style:{textAlign:"right"}},f.default.createElement(o.default,{onClick:function(){return p()}},"重置"),f.default.createElement(o.default,{type:"primary",style:{marginLeft:8},disabled:n.hasErrors(d()),onClick:n.handleSubmit},"确定"))))))},n.state={departmentDatas:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.Component),t}();t.default=u.default.create()(m)},872:function(e,t,n){var r=n(873);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(100)(r,a);r.locals&&(e.exports=r.locals)},873:function(e,t,n){(e.exports=n(99)(!1)).push([e.i,".ModuleLayout .plus-icon {\r\n    line-height: 0.4;\r\n    font-size: 6em;\r\n    color: #bcc3cb;\r\n    height: 54px;\r\n}\r\n\r\n.ModuleLayout {\r\n    background: #f5f6fa;\r\n    height: 100%;\r\n    transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\r\n}",""])}}]);